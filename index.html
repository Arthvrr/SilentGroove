<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SilentGroove</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" href="logo/logo.ico" type="image/x-icon">
</head>
<body>

<header class="site-header">
    <div class="logo">SilentGroove üé∂</div>
    <nav class="nav-links">
        <a href="#" onclick="loadPage('home')">Library</a>
        <button id="themeToggle" class="theme-btn">Dark Mode</button>
        <a href="#" onclick="loadPage('about')">About</a>
        <a href="#" onclick="loadPage('contact')">Contact</a>
    </nav>
</header>

<main id="main-content"></main>

<div class="player-bar hidden">
    <img id="playerThumbnail" class="player-thumb" src="" alt="">
    <div class="player-info">
        <button id="prevBtn" class="player-btn">‚èÆ</button>
        <button id="playPauseBtn" class="player-btn">‚ñ∂</button>
        <button id="nextBtn" class="player-btn">‚è≠</button>
        <span id="currentTrack">Aucune musique</span>
    </div>

    <div class="controls">
        <span id="currentTime">0:00</span>
        <input type="range" id="progress" value="0" step="1">
        <span id="duration">0:00</span>

        <div class="volume-control">
            <button id="muteBtn">üîä</button>
            <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1">
        </div>
    </div>
</div>

<!-- <div class="player-bar hidden">

    <div class="player-left">
        <img id="playerThumbnail" class="player-thumb" src="" alt="">
        
        <div class="player-controls">
            <button id="prevBtn" class="player-btn">‚èÆ</button>
            <button id="playPauseBtn" class="player-btn">‚ñ∂</button>
            <button id="nextBtn" class="player-btn">‚è≠</button>
        </div>

        <span id="currentTrack"></span>
    </div>

    <div class="player-center">
        <input type="range" id="progressBar">
    </div>

    <div class="volume-control">
        üîä
        <input type="range" id="volumeSlider">
    </div>

</div> -->


<audio id="audioPlayer"></audio>

<script>
// ---------- Audio Player ----------
const player = document.getElementById('audioPlayer');
const currentTrack = document.getElementById('currentTrack');
const progress = document.getElementById('progress');
const currentTime = document.getElementById('currentTime');
const duration = document.getElementById('duration');
const playPauseBtn = document.getElementById('playPauseBtn');

function togglePlay() {
    if (!player.src) return;
    if (player.paused) player.play();
    else player.pause();
}
playPauseBtn.addEventListener('click', togglePlay);
player.addEventListener('play', () => playPauseBtn.textContent = '‚è∏');
player.addEventListener('pause', () => playPauseBtn.textContent = '‚ñ∂');
player.addEventListener('timeupdate', () => {
    if (!isNaN(player.duration)) {
        progress.max = player.duration;
        progress.value = player.currentTime;
        currentTime.textContent = formatTime(player.currentTime);
        duration.textContent = formatTime(player.duration);
    }
});
player.addEventListener('ended', () => {
    // Passer √† la piste suivante, ou revenir √† la premi√®re si on est √† la derni√®re
    currentTrackIndex = (currentTrackIndex + 1) % tracksData.length;
    const next = tracksData[currentTrackIndex];
    playTrack(next.src, next.name);
});

progress.addEventListener('input', () => player.currentTime = progress.value);
function formatTime(seconds) {
    const min = Math.floor(seconds / 60);
    const sec = Math.floor(seconds % 60).toString().padStart(2, '0');
    return `${min}:${sec}`;
}

const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const muteBtn = document.getElementById('muteBtn');
const volumeSlider = document.getElementById('volumeSlider');

let currentTrackIndex = -1;

// Lecture d‚Äôune piste
function playTrack(src, name) {
    const index = tracksData.findIndex(t => t.src === src);
    if (index !== -1) currentTrackIndex = index;

    const track = tracksData[currentTrackIndex];

    player.src = track.src;
    player.play();

    currentTrack.textContent = track.name;

    document.getElementById("playerThumbnail").src = track.img;

    document.querySelector('.player-bar').classList.remove('hidden');
}

// Suivant / pr√©c√©dent
nextBtn.addEventListener('click', () => {
    if (currentTrackIndex < tracksData.length - 1) {
        currentTrackIndex++;
        const next = tracksData[currentTrackIndex];
        playTrack(next.src, next.name);
    }
});

prevBtn.addEventListener('click', () => {
    if (currentTrackIndex > 0) {
        currentTrackIndex--;
        const prev = tracksData[currentTrackIndex];
        playTrack(prev.src, prev.name);
    }
});

// Volume et mute
volumeSlider.addEventListener('input', () => {
    player.volume = volumeSlider.value;
    muteBtn.textContent = player.volume === 0 ? 'üîá' : 'üîä';
});

muteBtn.addEventListener('click', () => {
    if (player.muted) {
        player.muted = false;
        muteBtn.textContent = 'üîä';
        volumeSlider.value = player.volume;
    } else {
        player.muted = true;
        muteBtn.textContent = 'üîá';
    }
});

// ---------- SPA ----------
const mainContent = document.getElementById('main-content');
const tracksData = [
    {src:"musics/jazz.mp3", name:"1h30 Full Jazz Study", img:"images/jazz.jpg"},
    {src:"musics/lakey_inspired.mp3", name:"33 Songs Lakey Inspired", img:"images/lakey inspired.jpg"},
    {src:"musics/lofi_relax.mp3", name:"2h Lofi Hip Hop Relax", img:"images/lofi girl.png"},
    {src:"musics/city_pop.mp3", name:"1h City Pop", img:"images/city_pop.jpg"},
    {src:"musics/jungle.mp3", name:"1h Jungle", img:"images/jungle.jpg"},
    {src:"musics/playboi_carti.mp3", name:"1h Playboi Carti Type Beat", img:"images/playboi_carti.jpg"},
    {src:"musics/spatial_ambiant.mp3", name:"1h Spatial Ambiant Music", img:"images/spatial_ambiant.jpg"},
    {src:"musics/brazil_lofi.mp3", name:"1h Brazil Lofi", img:"images/brazil_lofi.jpg"},
    {src:"musics/cloud.mp3", name:"45min Cloud Lofi", img:"images/cloud.jpg"},
    {src:"musics/house_zara.mp3", name:"1h Zara House", img:"images/house_zara.jpg"},
    {src:"musics/classic_music.mp3", name:"1h Classic Music", img:"images/classic_music.jpg"},
    {src:"musics/synthwave_retro.mp3", name:"40min Synthwave Retro", img:"images/synthwave_retro.jpg"},
    {src:"musics/wood_fire.mp3", name:"1h Wood Fire", img:"images/wood_fire.jpg"},
    {src:"musics/rain.mp3", name:"1h Rain", img:"images/rain.jpg"},
    {src:"musics/waves.mp3", name:"1h Waves", img:"images/waves.jpg"},
    {src:"musics/meditation.mp3", name:"1h Meditation", img:"images/meditation.jpg"},
    {src:"musics/nintendo_vibes.mp3", name:"1h Nintendo Vibes", img:"images/nintendo_vibes.jpg"},
    {src:"musics/aesthetic_study.mp3", name:"1h Aesthetic Study", img:"images/aesthetic_study.jpg"},
    {src:"musics/jazz_lofi.mp3", name:"1h Jazz Lofi", img:"images/jazz_lofi.png"},
    {src:"musics/deep_house.mp3", name:"1h Deep House", img:"images/deep_house.jpg"},
    {src:"musics/lofi_hip_hop.mp3", name:"1h Lofi Hip Hop", img:"images/lofi_hip_hop.jpg"},
    

];

function loadGallery() {
    const gallery = document.getElementById('gallery-container');
    gallery.className = 'gallery';
    gallery.innerHTML = '';
    tracksData.forEach(track => {
        const div = document.createElement('div');
        div.className = 'track';
        div.dataset.src = track.src;
        div.dataset.name = track.name;

        div.innerHTML = `
            <img src="${track.img}" alt="${track.name}">
            <div class="track-name-overlay">${track.name}</div>
        `;

        div.addEventListener('click', () => playTrack(track.src, track.name));
        gallery.appendChild(div);
    });
}

function loadPage(page) {
    switch(page) {
        case 'home':
            mainContent.innerHTML = `<h1>Welcome to SilentGroove üéß</h1>
                                     <h2 class="subtitle">Listen to unlimited music, for free !</h2>
                                     <div class="gallery" id="gallery-container"></div>`;
            loadGallery();
            break;
        case 'about':
            mainContent.innerHTML = `
                                    <h1>About SilentGroove üéß</h1>
                                    <p class="about-text">All the music on SilentGroove comes from royalty-free YouTube videos, carefully selected to provide you with relaxing, fun, and high-quality tracks.</p>
                                    <p class="about-text">Thanks to this, you can enjoy unlimited music without ever paying a dime and without any ads interrupting your flow. Discover your favorite tunes and let the beats carry you, anytime and endlessly!</p>
                                    <p class="about-text">SilentGroove is all about giving you a seamless music experience, free and infinite. Sit back, relax, and let the music play!</p>
                                    `;
            break;
        case 'contact':
            mainContent.innerHTML = `
                                    <h1>Contact</h1>
                                    <p>Email : <a href="mailto:arthurlouette12@gmail.com">arthurlouette12@gmail.com</a></p>
                                    <p>GitHub : <a href="https://github.com/Arthvrr/SilentGroove" target="_blank">View the project here</a></p>
                                    `;
            break;
        case 'library':
            mainContent.innerHTML = `<h1>Music Library</h1>
                                     <div class="gallery" id="gallery-container"></div>`;
            loadGallery();
            break;
    }
}

// ---------- DARK MODE ----------
const themeToggle = document.getElementById('themeToggle');
const body = document.body;

// Charger le mode enregistr√© si dispo
if (localStorage.getItem('theme') === 'dark') {
    body.classList.add('dark-mode');
    themeToggle.textContent = 'Light Mode';
}

themeToggle.addEventListener('click', () => {
    body.classList.toggle('dark-mode');
    const isDark = body.classList.contains('dark-mode');
    themeToggle.textContent = isDark ? 'Light Mode' : 'Dark Mode';
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
});

// Load home by default
loadPage('home');
</script>

</body>
</html>